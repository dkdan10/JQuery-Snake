!function(e){var t={};function s(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=t,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(r,a,function(t){return e[t]}.bind(null,a));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=0)}([function(e,t,s){"use strict";s.r(t);const r=["N","S","E","W"];class a{constructor(){this.direction="N",this.segments=[[0,19]],this.growTurn=0,this.hasMovedThisFrame=!1}head(){return this.segments.slice(-1)[0]}move(){const e=this.head();switch(r.indexOf(this.direction)){case 0:this.segments.push([e[0],e[1]-1]);break;case 1:this.segments.push([e[0],e[1]+1]);break;case 2:this.segments.push([e[0]+1,e[1]]);break;case 3:this.segments.push([e[0]-1,e[1]]);break;default:console("Hit default... something aint right.")}this.growTurn>=0?this.growTurn-=1:this.segments.shift(),this.hasMovedThisFrame=!1}turn(e){var t,s;-1===r.indexOf(e)||this.hasMovedThisFrame||(t=this.direction,s=e,"N"===t&&"S"===s||"S"===t&&"N"===s||"E"===t&&"W"===s||"W"===t&&"E"===s||(this.direction=e),this.hasMovedThisFrame=!0)}}function n(e,t){return[e[0]===t[0]&&e[1]===t[1]]}class i{constructor(){this.snake=new a,this.generateRandomApple()}generateRandomApple(){let e=Math.floor(20*Math.random()),t=Math.floor(20*Math.random());for(;!this.snake.segments.some(s=>n(s,[e,t]));)e=Math.floor(20*Math.random()),t=Math.floor(20*Math.random());this.apple=[e,t]}}class o{constructor(e){this.board=e,this.lastPos=this.board.snake.head()}makeMove(){const e=this.board.snake.head();0===e[1]&&(this.lastPos[0]===e[0]?this.board.snake.turn("E"):this.board.snake.turn("S")),18===e[1]&&0!==e[0]&&19!==e[0]?this.lastPos[0]===e[0]?this.board.snake.turn("E"):this.board.snake.turn("N"):19===e[0]&&19===e[1]?this.board.snake.turn("W"):0===e[0]&&19===e[1]&&this.board.snake.turn("N"),this.lastPos=e}}function h(e,t){return e[0]===t[0]&&e[1]===t[1]}class d{constructor(e,t){this.$el=e,this.$extraTextDiv=t,this.board=new i,this.aiPlayer=new o(this.board),this.setupKeyBinds(),this.gameInterval=setInterval(()=>{this.step()},.1),this.over=!1}step(){this.aiPlayer.makeMove(),this.board.snake.move(),this.$el.empty(),this.$extraTextDiv.empty(),this.render()}render(){this.board.snake.segments.some(e=>e[0]>19||e[0]<0||e[1]>19||e[1]<0)&&(this.over=!0);for(let e=0;e<20;e++){const t=$("<ul>");for(let s=0;s<20;s++){const r=$("<li>"),a=this.board.snake.segments.filter(t=>h([s,e],t));1===a.length?r.addClass("snake-body"):a.length>1&&(this.over=!0),h(this.board.apple,[s,e])&&(this.board.snake.segments.filter(t=>h([s,e],t)).length?(this.board.snake.growTurn=2,this.board.generateRandomApple()):r.addClass("apple")),t.append(r)}this.$el.append(t)}this.aiPlayer.board!==this.board||this.over||this.printAiPlayer(),this.over&&this.gameOver()}printAiPlayer(){const e=$("<h2>");e.text("AI Player Playing");const t=$("<h1>");t.text("Press Space to Play"),this.$extraTextDiv.append(e),this.$extraTextDiv.append(t)}gameOver(){window.clearInterval(this.gameInterval);const e=$("<h2>");e.text("You Lose");const t=$("<h1>");t.text("Press Space to Restart"),this.$extraTextDiv.append(e),this.$extraTextDiv.append(t)}setupKeyBinds(){$(document).keydown(e=>{38===e.keyCode?this.board.snake.turn("N"):39===e.keyCode?this.board.snake.turn("E"):40===e.keyCode?this.board.snake.turn("S"):37===e.keyCode?this.board.snake.turn("W"):32===e.keyCode&&(this.over?(this.board=new i,this.over=!1,this.gameInterval=setInterval(()=>{this.step()},100)):this.aiPlayer.board===this.board&&(this.board=new i,this.over=!1,window.clearInterval(this.gameInterval),this.gameInterval=setInterval(()=>{this.step()},100)))})}}$(()=>{const e=$(".snake"),t=$(".additional-text");new d(e,t)})}]);