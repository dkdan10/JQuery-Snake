!function(t){var e={};function s(r){if(e[r])return e[r].exports;var a=e[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=e,s.d=function(t,e,r){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)s.d(r,a,function(e){return t[e]}.bind(null,a));return r},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=0)}([function(t,e,s){"use strict";s.r(e);const r=["N","S","E","W"];class a{constructor(){this.direction="N",this.segments=[[0,19]],this.growTurn=0,this.hasMovedThisFrame=!1}head(){return this.segments.slice(-1)[0]}move(){const t=this.head();switch(r.indexOf(this.direction)){case 0:this.segments.push([t[0],t[1]-1]);break;case 1:this.segments.push([t[0],t[1]+1]);break;case 2:this.segments.push([t[0]+1,t[1]]);break;case 3:this.segments.push([t[0]-1,t[1]]);break;default:console("Hit default... something aint right.")}this.growTurn>=0?this.growTurn-=1:this.segments.shift(),this.hasMovedThisFrame=!1}turn(t){var e,s;-1===r.indexOf(t)||this.hasMovedThisFrame||(e=this.direction,s=t,"N"===e&&"S"===s||"S"===e&&"N"===s||"E"===e&&"W"===s||"W"===e&&"E"===s||(this.direction=t),this.hasMovedThisFrame=!0)}}function n(t,e){return[t[0]===e[0]&&t[1]===e[1]]}class i{constructor(){this.snake=new a,this.generateRandomApple()}generateRandomApple(){let t=Math.floor(20*Math.random()),e=Math.floor(20*Math.random());for(;!this.snake.segments.some(s=>n(s,[t,e]));)t=Math.floor(20*Math.random()),e=Math.floor(20*Math.random());this.apple=[t,e]}}class o{constructor(t){this.board=t,this.lastPos=this.board.snake.head()}makeMove(){const t=this.board.snake.head();0===t[1]&&(this.lastPos[0]===t[0]?this.board.snake.turn("E"):this.board.snake.turn("S")),18===t[1]&&0!==t[0]&&19!==t[0]?this.lastPos[0]===t[0]?this.board.snake.turn("E"):this.board.snake.turn("N"):19===t[0]&&19===t[1]?this.board.snake.turn("W"):0===t[0]&&19===t[1]&&this.board.snake.turn("N"),this.lastPos=t}}function h(t,e){return t[0]===e[0]&&t[1]===e[1]}class d{constructor(t,e){this.$el=t,this.$extraTextDiv=e,this.board=new i,this.aiPlayer=new o(this.board),this.setupKeyBinds(),this.gameInterval=setInterval(()=>{this.step()},.1),this.over=!1}step(){this.aiPlayer.makeMove(),this.board.snake.move(),this.$el.empty(),this.$extraTextDiv.empty(),this.render()}render(){this.board.snake.segments.some(t=>t[0]>19||t[0]<0||t[1]>19||t[1]<0)&&(this.over=!0);for(let t=0;t<20;t++){const e=$("<ul>");for(let s=0;s<20;s++){const r=$("<li>"),a=this.board.snake.segments.filter(e=>h([s,t],e));1===a.length?r.addClass("snake-body"):a.length>1&&(this.over=!0),h(this.board.apple,[s,t])&&(this.board.snake.segments.filter(e=>h([s,t],e)).length?(this.board.snake.growTurn=2,this.board.generateRandomApple()):r.addClass("apple")),e.append(r)}this.$el.append(e)}this.aiPlayer.board!==this.board||this.over||this.printAiPlayer(),this.over&&this.gameOver()}printAiPlayer(){const t=$("<h2>");t.text("AI Player Playing");const e=$("<h1>");e.text("Press Space to Play"),this.$extraTextDiv.append(t),this.$extraTextDiv.append(e)}gameOver(){window.clearInterval(this.gameInterval);const t=$("<h2>");t.text("You Lose");const e=$("<h1>");e.text("Press Space to Restart"),this.$extraTextDiv.append(t),this.$extraTextDiv.append(e)}setupKeyBinds(){$(document).keydown(t=>{38===t.keyCode?this.board.snake.turn("N"):39===t.keyCode&&this.aiPlayer.board!==this.board?this.board.snake.turn("E"):40===t.keyCode&&this.aiPlayer.board!==this.board?this.board.snake.turn("S"):37===t.keyCode&&this.aiPlayer.board!==this.board?this.board.snake.turn("W"):32===t.keyCode&&(this.over?(this.board=new i,this.over=!1,this.gameInterval=setInterval(()=>{this.step()},100)):this.aiPlayer.board===this.board&&(this.board=new i,this.over=!1,window.clearInterval(this.gameInterval),this.gameInterval=setInterval(()=>{this.step()},100)))})}}$(()=>{const t=$(".snake"),e=$(".additional-text");new d(t,e)})}]);